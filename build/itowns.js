/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

define("Core/Commander/Interfaces/EventsManager",[],function(){function e(){this.commands=null,this.events=null}return e.prototype.connect=function(e,t){},e}),THREE.OrbitControls=function(e,t){function O(){return 2*Math.PI/60/60*n.autoRotateSpeed}function M(){return Math.pow(.95,n.zoomSpeed)}function _(e){if(n.enabled===!1)return;e.preventDefault();if(e.button===n.mouseButtons.ORBIT){if(n.noRotate===!0)return;T=x.ROTATE,i.set(e.clientX,e.clientY)}else if(e.button===n.mouseButtons.ZOOM){if(n.noZoom===!0)return;T=x.DOLLY,h.set(e.clientX,e.clientY)}else if(e.button===n.mouseButtons.PAN){if(n.noPan===!0)return;T=x.PAN,u.set(e.clientX,e.clientY)}T!==x.NONE&&(document.addEventListener("mousemove",D,!1),document.addEventListener("mouseup",P,!1),n.dispatchEvent(L))}function D(e){if(n.enabled===!1)return;e.preventDefault();var t=n.domElement===document?n.domElement.body:n.domElement;if(T===x.ROTATE){if(n.noRotate===!0)return;s.set(e.clientX,e.clientY),o.subVectors(s,i),n.rotateLeft(2*Math.PI*o.x/t.clientWidth*n.rotateSpeed),n.rotateUp(2*Math.PI*o.y/t.clientHeight*n.rotateSpeed),i.copy(s)}else if(T===x.DOLLY){if(n.noZoom===!0)return;p.set(e.clientX,e.clientY),d.subVectors(p,h),d.y>0?n.dollyIn():d.y<0&&n.dollyOut(),h.copy(p)}else if(T===x.PAN){if(n.noPan===!0)return;a.set(e.clientX,e.clientY),f.subVectors(a,u),n.pan(f.x,f.y),u.copy(a)}T!==x.NONE&&n.update()}function P(){if(n.enabled===!1)return;document.removeEventListener("mousemove",D,!1),document.removeEventListener("mouseup",P,!1),n.dispatchEvent(A),T=x.NONE}function H(e){if(n.enabled===!1||n.noZoom===!0||T!==x.NONE)return;e.preventDefault(),e.stopPropagation();var t=0;e.wheelDelta!==undefined?t=e.wheelDelta:e.detail!==undefined&&(t=-e.detail),t>0?n.dollyOut():t<0&&n.dollyIn(),n.update(),n.dispatchEvent(L),n.dispatchEvent(A)}function B(e){if(n.enabled===!1||n.noKeys===!0||n.noPan===!0)return;switch(e.keyCode){case n.keys.UP:n.pan(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:n.pan(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:n.pan(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:n.pan(-n.keyPanSpeed,0),n.update()}}function j(e){if(n.enabled===!1)return;switch(e.touches.length){case 1:if(n.noRotate===!0)return;T=x.TOUCH_ROTATE,i.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(n.noZoom===!0)return;T=x.TOUCH_DOLLY;var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,s=Math.sqrt(t*t+r*r);h.set(0,s);break;case 3:if(n.noPan===!0)return;T=x.TOUCH_PAN,u.set(e.touches[0].pageX,e.touches[0].pageY);break;default:T=x.NONE}T!==x.NONE&&n.dispatchEvent(L)}function F(e){if(n.enabled===!1)return;e.preventDefault(),e.stopPropagation();var t=n.domElement===document?n.domElement.body:n.domElement;switch(e.touches.length){case 1:if(n.noRotate===!0)return;if(T!==x.TOUCH_ROTATE)return;s.set(e.touches[0].pageX,e.touches[0].pageY),o.subVectors(s,i),n.rotateLeft(2*Math.PI*o.x/t.clientWidth*n.rotateSpeed),n.rotateUp(2*Math.PI*o.y/t.clientHeight*n.rotateSpeed),i.copy(s),n.update();break;case 2:if(n.noZoom===!0)return;if(T!==x.TOUCH_DOLLY)return;var r=e.touches[0].pageX-e.touches[1].pageX,l=e.touches[0].pageY-e.touches[1].pageY,c=Math.sqrt(r*r+l*l);p.set(0,c),d.subVectors(p,h),d.y>0?n.dollyOut():d.y<0&&n.dollyIn(),h.copy(p),n.update();break;case 3:if(n.noPan===!0)return;if(T!==x.TOUCH_PAN)return;a.set(e.touches[0].pageX,e.touches[0].pageY),f.subVectors(a,u),n.pan(f.x,f.y),u.copy(a),n.update();break;default:T=x.NONE}}function I(){if(n.enabled===!1)return;n.dispatchEvent(A),T=x.NONE}this.object=e,this.domElement=t!==undefined?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=Infinity,this.minZoom=0,this.maxZoom=Infinity,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-Infinity,this.maxAzimuthAngle=Infinity,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var n=this,r=1e-6,i=new THREE.Vector2,s=new THREE.Vector2,o=new THREE.Vector2,u=new THREE.Vector2,a=new THREE.Vector2,f=new THREE.Vector2,l=new THREE.Vector3,c=new THREE.Vector3,h=new THREE.Vector2,p=new THREE.Vector2,d=new THREE.Vector2,v,m,g=0,y=0,b=1,w=new THREE.Vector3,E=new THREE.Vector3,S=new THREE.Quaternion,x={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},T=x.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var N=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),C=N.clone().inverse(),k={type:"change"},L={type:"start"},A={type:"end"};this.rotateLeft=function(e){e===undefined&&(e=O()),y-=e},this.rotateUp=function(e){e===undefined&&(e=O()),g-=e},this.panLeft=function(e){var t=this.object.matrix.elements;l.set(t[0],t[1],t[2]),l.multiplyScalar(-e),w.add(l)},this.panUp=function(e){var t=this.object.matrix.elements;l.set(t[4],t[5],t[6]),l.multiplyScalar(e),w.add(l)},this.pan=function(e,t){var r=n.domElement===document?n.domElement.body:n.domElement;if(n.object instanceof THREE.PerspectiveCamera){var i=n.object.position,s=i.clone().sub(n.target),o=s.length();o*=Math.tan(n.object.fov/2*Math.PI/180),n.panLeft(2*e*o/r.clientHeight),n.panUp(2*t*o/r.clientHeight)}else n.object instanceof THREE.OrthographicCamera?(n.panLeft(e*(n.object.right-n.object.left)/r.clientWidth),n.panUp(t*(n.object.top-n.object.bottom)/r.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){e===undefined&&(e=M()),n.object instanceof THREE.PerspectiveCamera?b/=e:n.object instanceof THREE.OrthographicCamera?(n.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*e)),n.object.updateProjectionMatrix(),n.dispatchEvent(k)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(e){e===undefined&&(e=M()),n.object instanceof THREE.PerspectiveCamera?b*=e:n.object instanceof THREE.OrthographicCamera?(n.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/e)),n.object.updateProjectionMatrix(),n.dispatchEvent(k)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=function(){var e=this.object.position;c.copy(e).sub(this.target),c.applyQuaternion(N),v=Math.atan2(c.x,c.z),m=Math.atan2(Math.sqrt(c.x*c.x+c.z*c.z),c.y),this.autoRotate&&T===x.NONE&&this.rotateLeft(O()),v+=y,m+=g,v=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,v)),m=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,m)),m=Math.max(r,Math.min(Math.PI-r,m));var t=c.length()*b;t=Math.max(this.minDistance,Math.min(this.maxDistance,t)),this.target.add(w),c.x=t*Math.sin(m)*Math.sin(v),c.y=t*Math.cos(m),c.z=t*Math.sin(m)*Math.cos(v),c.applyQuaternion(C),e.copy(this.target).add(c),this.object.lookAt(this.target),y=0,g=0,b=1,w.set(0,0,0);if(E.distanceToSquared(this.object.position)>r||8*(1-S.dot(this.object.quaternion))>r)this.dispatchEvent(k),E.copy(this.object.position),S.copy(this.object.quaternion)},this.reset=function(){T=x.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(k),this.update()},this.getPolarAngle=function(){return m},this.getAzimuthalAngle=function(){return v},this.domElement.addEventListener("contextmenu",function(e){e.preventDefault()},!1),this.domElement.addEventListener("mousedown",_,!1),this.domElement.addEventListener("mousewheel",H,!1),this.domElement.addEventListener("DOMMouseScroll",H,!1),this.domElement.addEventListener("touchstart",j,!1),this.domElement.addEventListener("touchend",I,!1),this.domElement.addEventListener("touchmove",F,!1),window.addEventListener("keydown",B,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,define("OrbitControls",["THREE"],function(){}),define("Scene/Node",[],function(){function e(){this.parent=null,this.children=[],this.bbox=null,this.url=null,this.content=null,this.description=null,this.id=null,this.saveState=null,this.level=null}return e.prototype.childrenCount=function(){return this.children.length},e.prototype.update=function(){},e.prototype.hydrate=function(){},e.prototype.dehydrate=function(e){},e.prototype.add=function(e){},e.prototype.remove=function(e){},e.extend=function(t){function n(e,t){for(var n in e)if(e[n]===t)return n;return!1}for(var r in e.prototype){var i=n(e.prototype,e.prototype[r]);i!=="add"&&i!=="remove"&&(t.prototype[i]=e.prototype[r])}},e}),define("Renderer/Camera",["Scene/Node","THREE"],function(e,t){function n(n){e.call(this),this.camera3D=new t.PerspectiveCamera(30,n,.1,1e3)}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.position=function(){return this.renderCamera.position},n}),define("Renderer/c3DEngine",["THREE","OrbitControls","Renderer/Camera"],function(e,t,n){function r(){this.scene3D=new e.Scene,this.renderer=new e.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(0),this.renderer.autoClear=!1,document.body.appendChild(this.renderer.domElement);var t=window.innerWidth/window.innerHeight;this.camera=new n(t),this.scene3D.add(this.camera.camera3D),this.controls=new e.OrbitControls(this.camera.camera3D,this.renderer.domElement),this.controls.damping=.1,this.controls.noPan=!0,this.controls.rotateSpeed=.8,this.controls.zoomSpeed=1,this.controls.minDistance=6.4,this.controls.maxDistance=50;var r=this;this.renderScene=function(){r.renderer.clear(),r.renderer.setViewport(0,0,window.innerWidth,window.innerHeight),r.renderer.render(r.scene3D,r.camera.camera3D)},this.controls.addEventListener("change",this.renderScene)}return r.prototype.style2Engine=function(){},r.prototype.add3DScene=function(){},r.prototype.precision=function(){},r}),define("Renderer/NodeMesh",["Scene/Node","THREE"],function(e,t){var n=function(){e.call(this),t.Mesh.call(this)};return n.prototype=Object.create(t.Mesh.prototype),n.prototype.constructor=n,e.extend(n),n}),THREE.StarGeometry=function(){THREE.Geometry.call(this);for(var e=0;e<1e4;e++){var t=new THREE.Vector3;t.x=THREE.Math.randFloatSpread(2e3),t.y=THREE.Math.randFloatSpread(2e3),t.z=THREE.Math.randFloatSpread(2e3),this.vertices.push(t)}},THREE.StarGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.StarGeometry.prototype.constructor=THREE.StarGeometry,define("StarGeometry",["THREE"],function(){}),define("Globe/Star",["Renderer/NodeMesh","StarGeometry"],function(e,t){var n=function(){e.call(this);var t=new THREE.StarGeometry,n=new THREE.Points(t,new THREE.PointsMaterial({color:11184844}));this.add(n)};return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n}),define("Core/Commander/InterfaceCommander",[],function(){function e(e,t){this._managerCommands=e,this._builderCommand=t}return e.prototype.constructor=e,e.prototype.request=function(e){},e.prototype.buildCommand=function(){this._builderCommand()},e});var Node=require("Node");define("Scene/Layer",["Scene/Node","Core/Commander/InterfaceCommander"],function(e,t){function n(n){e.call(this),this.interCommand=new t(n),this._descriManager=null,this.interCommand._managerCommands.getTile(0,0,0)}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n}),define("Globe/Map",["Scene/Layer"],function(e){function t(t){e.call(this,t),this.projection=null,this.quatree=null}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}),define("Globe/Globe",["Scene/Node","Globe/Map"],function(e,t){function n(n){e.call(this),this.layers=[],this.terrain=new t(n),this.layers.push(this.terrain)}return n.prototype=Object.create(n.prototype),n.prototype.constructor=n,n.prototype.QuadTreeToMesh=function(){},n.prototype.QuadTreeToMaterial=function(){},n}),define("Core/Commander/Providers/Provider",[],function(){function e(e){this.type=null,this._IoDriver=e}return e.prototype.constructor=e,e.prototype.get=function(e){},e.prototype.getInCache=function(e){},e}),define("Core/Commander/Providers/IoDriver",[],function(){function e(){}return e.prototype.constructor=e,e.prototype.load=function(e){},e.prototype.write=function(e,t){},e.prototype.readAsync=function(e){},e.prototype.writeAsync=function(e){},e}),define("Core/Commander/Providers/IoDriver_XBIL",["Core/Commander/Providers/IoDriver"],function(e){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.read=function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.crossOrigin="",t.onload=function(){var e=this.response;if(e){var t=new Float32Array(e),n=65536,r=new Float32Array(4*n);for(var i=0;i<t.byteLength;i++){if(t[i]===-99999||t[i]===undefined)t[i]=0;r[i*4+3]=1,r[i*4+2]=t[i],r[i*4+1]=t[i],r[i*4+0]=t[i]}console.log(r)}},t.send(null)},t}),define("Core/Commander/Providers/WMTS_Provider",["Core/Commander/Providers/Provider","Core/Commander/Providers/IoDriver_XBIL"],function(e,t){function n(){e.call(this,new t)}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.url=function(e,t,n){var r="wmybzw30d6zg563hjlq8eeqb",i="ELEVATION.ELEVATIONGRIDCOVERAGE",s="http://wxs.ign.fr/"+r+"/geoportail/wmts?LAYER="+i+"&FORMAT=image/x-bil;bits=32&SERVICE=WMTS&VERSION=1.0.0"+"&REQUEST=GetTile&STYLE=normal&TILEMATRIXSET=PM"+"&TILEMATRIX="+e+"&TILEROW="+t+"&TILECOL="+n;return s},n.prototype.getTile=function(e,t,n){this._IoDriver.read(this.url(e,t,n))},n}),define("Core/Commander/ManagerCommands",["Core/Commander/Providers/WMTS_Provider"],function(e){function t(){this.queueAsync=null,this.queueSync=null,this.loadQueue=null,this._providers=[],this._history=null,this._providers.push(new e)}return t.prototype.constructor=t,t.prototype.getTile=function(e,t,n){this._providers[0].getTile(e,t,n)},t.prototype.sortByPriority=function(){},t.prototype.removeCanceled=function(){},t.prototype.process=function(){},t.prototype.forecast=function(){},t.prototype.addInHistory=function(e){},t}),define("Scene/Scene",["Renderer/c3DEngine","Globe/Star","Globe/Globe","Renderer/NodeMesh","Core/Commander/ManagerCommands"],function(e,t,n,r,i){function s(){this.gfxEngine=new e,this.browserScene=null,this.nodes=[],this.managerCommand=new i,this.cameras=null,this.currentCamera=null,this.selectNodes=null,this.add(new t),this.add(new n(this.managerCommand)),this.renderScene3D()}return s.prototype.updateCommand=function(){},s.prototype.updateCamera=function(){},s.prototype.sceneProcess=function(e){},s.prototype.updateScene3D=function(){},s.prototype.renderScene3D=function(){this.gfxEngine.renderScene()},s.prototype.add=function(e){this.nodes.push(e),e instanceof r&&this.gfxEngine.scene3D.add(e)},s.prototype.remove=function(e){},s.prototype.select=function(e){},s}),define("Core/Commander/Interfaces/ApiInterface/ApiGlobe",["Core/Commander/Interfaces/EventsManager","Scene/Scene"],function(e,t){function n(){this.commandsTree=null}return n.prototype=new e,n.prototype.add=function(e){},n.prototype.createCommand=function(e){},n.prototype.execute=function(){},n.CreateSceneGlobe=function(){return new t},n}),requirejs.config({baseUrl:"src/",paths:{THREE:"https://rawgit.com/mrdoob/three.js/master/build/three.min",OrbitControls:"Renderer/Three/OrbitControls",StarGeometry:"Renderer/ThreeExtented/StarGeometry"},shim:{THREE:{exports:"THREE"},OrbitControls:{deps:["THREE"]},StarGeometry:{deps:["THREE"]}},waitSeconds:30}),requirejs(["Core/Commander/Interfaces/ApiInterface/ApiGlobe"],function(e){console.log(e.CreateSceneGlobe())}),define("Main",function(){});